# BUG-016: Gerente Financeiro não tem acesso ao menu Configurações apesar de ter settings:read

## Informações
- **Data:** 15/01/2026
- **Teste:** FIN-GER-005
- **Usuário Testado:** Gerente Financeiro
- **Executor:** Sistema automatizado
- **Severidade:** MÉDIA

## Comportamento Esperado
O Gerente Financeiro possui a permissão `settings:read` definida em `permissions.ts`, portanto deveria poder visualizar as configurações do sistema (em modo leitura).

## Comportamento Atual
O menu "Configurações" só é visível para usuários com `admin:all`, conforme implementado em `app-sidebar.tsx`:

```typescript
const configItems: MenuItem[] = [
  {
    title: "Configurações",
    href: "/configuracoes",
    icon: Settings,
    requireAdmin: true, // <- Requer admin:all, não settings:read
  },
];
```

## Análise da Causa
Há uma inconsistência entre:
1. **Permissões definidas**: Gerente Financeiro tem `settings:read`
2. **UI implementada**: Menu Configurações requer `admin:all` (via `RequireAdmin` component)

## Arquivos Afetados
- `apps/web/src/components/layout/app-sidebar.tsx`
- `apps/web/src/lib/auth/permissions.ts`

## Opções de Correção

### Opção A: Ajustar o sidebar para usar settings:read
```typescript
const configItems: MenuItem[] = [
  {
    title: "Configurações",
    href: "/configuracoes",
    icon: Settings,
    requirePermission: 'settings:read', // Nova prop
  },
];
```

### Opção B: Remover settings:read dos cargos que não são admin
Se a intenção é que apenas admins acessem configurações, remover `settings:read` de cargos como Gerente Financeiro.

## Impacto
- Gerentes de departamentos com `settings:read` não conseguem acessar configurações
- Afeta: Gerente Financeiro, Gerente Sinistros, Gerente Comercial, Gerente Auditoria

## Observações
Este bug pode ser uma decisão de design intencional, mas cria confusão entre as permissões documentadas e o comportamento real do sistema.
